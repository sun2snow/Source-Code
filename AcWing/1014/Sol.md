找到一条最长的子序列 $\{s_n\}$，使得 $\exists i\in[1,n]$，满足

$$
\forall j\in[1,i),s_j < s_{j+1}\\
\forall j\in(i,n],s_j > s_{j+1}
$$

---

考虑枚举序列的分割点。

预处理出每个 $i\in[1,n]$ 的**以 $i$ 为结尾的最长上升子序列**和**以 $i$ 为开头的最长下降子序列**。

前一个显然是板子，后一个可以倒序遍历求。

答案记在 $\{f_n\},\{g_n\}$。

最终结果即为

$$
\max\limits_{i=1}^{n}\{f_i+g_i-1\}
$$

时间复杂度为 $O(n^2)$。

